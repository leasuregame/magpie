// Generated by CoffeeScript 1.6.2
var should, store;

store = require('../model/battle_store');

should = require('should');

describe('battle store', function() {
  it('invalid key, whitespace', function() {
    return store.setData('a b c', 'value', function(err, data) {
      err.should.be.instanceOf(Error);
      return should.strictEqual(void 0, data);
    });
  });
  it('.setData()', function() {
    return store.setData('test_key', 'test_value', function(err, data) {
      should.strictEqual(void 0, err);
      return data.should.be.ok;
    });
  });
  it('.getData()', function() {
    return store.getData('test_key', function(err, data) {
      should.strictEqual(void 0, err);
      return data.should.be.equal('test_value');
    });
  });
  it('.getData(), not exist key', function() {
    return store.getData('not_exist_key', function(err, data) {
      should.strictEqual(void 0, err);
      return data.should.not.be.ok;
    });
  });
  it('.delData()', function() {
    store.delData('test_key', function(err, data) {
      should.strictEqual(void 0, err);
      return data.should.be.ok;
    });
    return store.getData('test_key', function(err, data) {
      should.strictEqual(void 0, err);
      return data.should.not.be.ok;
    });
  });
  it('.delData(), not exist key', function() {
    return store.delData('not_exist_key', function(err, data) {
      should.strictEqual(void 0, err);
      return data.should.not.be.ok;
    });
  });
  return it('.setData(), .getData() and .delData()', function() {
    store.setData('test_key1', {
      test: 'value'
    }, function(err, data) {
      should.strictEqual(void 0, err);
      return data.should.be.ok;
    });
    store.getData('test_key1', function(err, data) {
      should.strictEqual(void 0, err);
      data.should.be.a('string');
      return JSON.parse(data).should.be.eql({
        test: 'value'
      });
    });
    store.delData('test_key1', function(err, data) {
      should.strictEqual(void 0, err);
      return data.should.be.ok;
    });
    return store.getData('test_key1', function(err, data) {
      should.strictEqual(void 0, err);
      return data.should.not.be.ok;
    });
  });
});
